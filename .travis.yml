language: generic

sudo: false

env:
  global:
  - ISABELLE_DIR: $HOME/.local/Isabelle2016
  - ISABELLE: $ISABELLE_DIR/bin/isabelle

cache:
  directories:
  - $ISABELLE_DIR

before_install:
  - mkdir -p .local
  - test -e $ISABELLE || wget http://isabelle.in.tum.de/dist/Isabelle2016_app.tar.gz
  - test -e $ISABELLE || tar -C .local/ -xzf Isabelle2016_app.tar.gz
  - test -e `$ISABELLE getenv -b ISABELLE_HOME`/heaps/`$ISABELLE getenv -b ISABELLE_SYSTEM`_`$ISABELLE getenv -b ISABELLE_PLATFORM`/HOL || $ISABELLE build -b -s -v HOL

install: true

before_script: export PATH=`pwd`/.local/Isabelle2016/bin:$PATH

script: isabelle build -d . isabelle-ci-test
